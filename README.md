# Onye FHIR Data Query System

A modern, user-friendly web application for querying and visualizing FHIR (Fast Healthcare Interoperability Resources) data. Built with Next.js, TypeScript, and Tailwind CSS, this application provides an intuitive interface for healthcare professionals to search, filter, and analyze patient records, observations, and medical conditions.

![Onye Logo](public/onye_logo.svg)

## 🌟 Features

### Core Functionality
- **Natural Language Query** - Ask questions in plain English about patients, conditions, medications, and observations
- **AI-Powered Analysis** - Backend powered by Anthropic Claude for intelligent data querying
- **Real-time Results** - Instant responses from the FastAPI backend
- **Multiple Data Types** - Support for Patients, Conditions, Medications, Observations, and Practitioners
- **Generated Code Display** - View the pandas code generated by the AI

### Data Visualization
- **Interactive Charts** 
  - Bar charts for data distribution
  - Pie charts with percentage breakdowns
  - Responsive design that adapts to screen sizes
- **Dynamic Data Tables** - Comprehensive tabular views with all returned data
- **Summary Cards** - Detailed individual record cards with complete information
- **Natural Language Responses** - Human-readable summaries of query results

### User Experience
- **Onye Branding** - Professional healthcare design with teal/cyan color scheme
- **Responsive Layout** - Works seamlessly on desktop, tablet, and mobile devices
- **Accessible UI** - High contrast, clear typography using Quicksand font
- **Loading States** - Visual feedback during API calls
- **Error Handling** - Clear error messages and connection status
- **Quick Queries** - Pre-defined query buttons for common searches

## 🚀 Getting Started

### Prerequisites
- Node.js 18.x or higher
- npm or yarn package manager
- **Backend API running** (FastAPI with Anthropic Claude integration)

### Installation

1. **Clone the repository**
   ```bash
   git clone https://github.com/beloveddie/OnyeFrontend.git
   cd OnyeFrontend
   ```

2. **Install dependencies**
   ```bash
   npm install
   ```

3. **Configure API endpoint**
   
   Create a `.env.local` file in the root directory:
   ```bash
   cp .env.local.example .env.local
   ```
   
   Edit `.env.local` and set your backend API URL:
   ```env
   NEXT_PUBLIC_API_URL=http://localhost:8000
   ```

4. **Run the development server**
   ```bash
   npm run dev
   ```

5. **Open your browser**
   Navigate to [http://localhost:3000](http://localhost:3000)

**Important:** Make sure your FastAPI backend is running before using the application.

### Build for Production

```bash
npm run build
npm start
```

## 🐳 Docker Deployment

This project includes Docker support for both development and production environments.

### Development Mode (Default)

Run the development server with hot-reload and live code changes:

1. **Build and run the container**
   ```bash
   docker-compose up --build
   ```

2. **Run in detached mode (background)**
   ```bash
   docker-compose up -d --build
   ```

3. **Stop the container**
   ```bash
   docker-compose down
   ```

4. **View logs**
   ```bash
   docker-compose logs -f frontend
   ```

The development mode includes:
- Hot-reload functionality with live code changes
- Volume mounting for instant updates without rebuilding
- Full Next.js development features
- Access to development tools and error overlays

### Production Mode

Run the optimized production build:

1. **Build and run the production container**
   ```bash
   docker-compose -f docker-compose.prod.yml up --build
   ```

2. **Run in detached mode**
   ```bash
   docker-compose -f docker-compose.prod.yml up -d --build
   ```

3. **Stop the production container**
   ```bash
   docker-compose -f docker-compose.prod.yml down
   ```

### Using Docker directly

**Development:**
```bash
docker build --target development -t onye-frontend-dev .
docker run -p 3000:3000 -v $(pwd):/app -v /app/node_modules onye-frontend-dev
```

**Production:**
```bash
docker build --target production -t onye-frontend-prod .
docker run -p 3000:3000 onye-frontend-prod
```

### Docker Configuration

The project includes:
- **Dockerfile** - Multi-stage build with separate development and production stages
  - `development` stage: Runs Next.js dev server with hot-reload
  - `production` stage: Optimized build with minimal image size
  - Uses Node.js 18 Alpine for minimal size
  - Implements security best practices with non-root user (production)
  - Leverages Next.js standalone output for reduced image size
- **docker-compose.yml** - Development orchestration (default)
  - Targets development stage
  - Volume mounting for live code changes
  - Development environment variables
- **docker-compose.prod.yml** - Production orchestration
  - Targets production stage
  - No volume mounting for security
  - Production environment variables
  - Restart policy for high availability

### Accessing the Application

Once running, access the application at [http://localhost:3000](http://localhost:3000)

## 📁 Project Structure

```
frontend/
├── src/
│   ├── app/
│   │   ├── page.tsx          # Main application component
│   │   ├── layout.tsx        # Root layout with Quicksand font
│   │   ├── globals.css       # Global styles and animations
│   │   └── favicon.ico       # Application icon
│   └── ...
├── public/
│   ├── onye_logo.svg         # Onye brand logo
│   └── ...
├── .env.local.example        # Environment variables template
├── .env.local                # Environment variables (not in git)
├── Dockerfile                # Multi-stage Docker configuration
├── docker-compose.yml        # Docker Compose for development
├── docker-compose.prod.yml   # Docker Compose for production
├── package.json              # Dependencies and scripts
├── next.config.ts            # Next.js configuration (with standalone output)
├── tsconfig.json             # TypeScript configuration
└── tailwind.config.ts        # Tailwind CSS configuration
```

## 🛠️ Technologies Used

### Frontend Framework
- **Next.js 15** - React framework with App Router
- **React 19** - UI library
- **TypeScript** - Type-safe JavaScript

### Styling
- **Tailwind CSS** - Utility-first CSS framework
- **Google Fonts** - Quicksand font family
- **Custom CSS Animations** - Blob effects and transitions

### Data Visualization
- **Recharts** - Composable charting library
  - Bar charts
  - Pie charts
  - Responsive containers
  - Interactive tooltips

### Backend Integration
- **FastAPI** - High-performance Python API
- **Anthropic Claude 3.5 Sonnet** - AI-powered natural language to pandas code
- **Pandas** - Data analysis and manipulation
- **FHIR R4** - Healthcare interoperability standard

### Development Tools
- **ESLint** - Code linting
- **PostCSS** - CSS processing
- **Turbopack** - Fast bundler for development

### Deployment
- **Docker** - Containerization for consistent deployments
- **Docker Compose** - Multi-container orchestration
- **Standalone Output** - Optimized Next.js build for production

## 📊 FHIR Data Types

The application queries real FHIR R4 data through the backend API:

### Patients
- Patient ID
- Name
- Age
- Gender
- Birth Date

### Conditions
- Condition ID
- Patient Reference
- ICD Code
- Description
- Clinical Status
- Onset Date

### Medications
- Medication ID
- Name
- Status
- Form

### Medication Requests
- Request ID
- Patient Reference
- Medication Reference
- Status
- Authored Date

### Observations
- Observation ID
- Patient Reference
- Code/Type
- Value and Unit
- Effective Date

## 🎨 Design System

### Colors
- **Primary**: Teal (#14B8A6, #5ABCB9)
- **Secondary**: Cyan (#06B6D4)
- **Accent**: Rose (#E74C60) for conditions
- **Neutral**: Gray scale for text and backgrounds

### Typography
- **Font Family**: Quicksand (300, 400, 500, 600, 700)
- **Headings**: Bold, large sizes
- **Body**: Regular weight, readable sizes

### Components
- **Rounded Corners**: 2xl for cards, full for buttons
- **Shadows**: Soft shadows with hover effects
- **Transitions**: Smooth color and shadow transitions

## 🔍 Query Examples

### Patient Queries
- "How many patients do we have?"
- "Show me all female patients"
- "List all patients over 60"
- "Who are the oldest patients?"

### Condition Queries
- "Show patients with diabetes"
- "What are the most common conditions?"
- "List all patients with hypertension"
- "How many patients have multiple conditions?"

### Medication Queries
- "What medications are being prescribed?"
- "Show me all medication requests"
- "List medications for patient-1"

### Observation Queries
- "Show all observations"
- "List observations for patient-2"
- "What vital signs do we have?"

### Analytics Queries
- "What is the average age of patients?"
- "Show me the age distribution"
- "Count patients by gender"

## 🌐 Browser Support

- Chrome (latest)
- Firefox (latest)
- Safari (latest)
- Edge (latest)

## 📝 Future Enhancements

- [ ] Advanced filtering on frontend
- [ ] User authentication and authorization
- [ ] Export data to CSV/PDF
- [ ] Saved queries and query history
- [ ] Real-time data updates with WebSockets
- [ ] Multi-language support
- [ ] Dark mode toggle
- [ ] Custom dashboard creation
- [ ] Voice input for queries
- [ ] Collaborative query sharing

## 📄 License

This project is licensed under the MIT License.

## 👤 Contact

**Eddie Otudor**  
Email: [edbeeotudor@gmail.com](mailto:edbeeotudor@gmail.com)

## 🙏 Acknowledgments

- Onye Healthcare for the branding and design guidelines
- FHIR community for healthcare interoperability standards
- Next.js team for the excellent framework
- Recharts for the visualization library

---

**Built with ❤️ for better healthcare outcomes**

